{
    "name": "Test Dev Environment",
    "image": "ghcr.io/automattic/vip-codespaces/alpine-base:latest",
    "overrideCommand": false,
    "forwardPorts": [80, 81, 8025, 9003],
    "portsAttributes": {
        "80": {
            "label": "Application",
            "onAutoForward": "notify",
            "elevateIfNeeded": true
        },
        "81": {
            "label": "phpMyAdmin",
            "onAutoForward": "notify",
            "elevateIfNeeded": true
        },
        "1025": {
            "label": "MailHog SMTP",
            "onAutoForward": "ignore"
        },
        "3306": {
            "label": "MySQL",
            "onAutoForward": "ignore"
        },
        "8025": {
            "label": "MailHog",
            "onAutoForward": "notify"
        },
        "9000": {
            "label": "php-fpm",
            "onAutoForward": "ignore"
        },
        "9003": {
            "label": "XDebug Client Port",
            "onAutoForward": "notify"
        }
    },
    "updateContentCommand": "composer install",
    "postCreateCommand": "/usr/local/bin/setup-wordpress.sh",
    "features": {
        // Mandatory features
        "ghcr.io/automattic/vip-codespaces/nginx:latest": {
            // Set the URL to redirect for missing media files
            "mediaRedirectURL": ""
        },
        "ghcr.io/automattic/vip-codespaces/php:latest": {
            // PHP version to use: 8.0, 8.1, 8.2
            "version": "8.0",
            "composer": true
        },
        "ghcr.io/automattic/vip-codespaces/mariadb:latest": {
            // Set to false if you don't want to persist the database between rebuilds
            "installDatabaseToWorkspaces": true
        },
        "ghcr.io/automattic/vip-codespaces/wordpress:latest": {
            // WordPress version: latest, nightly or anything that "wp core download" understands
            "version": "latest",
            // Set to false if you don't want to persist the wp-content/uploads between rebuilds
            "moveUploadsToWorkspaces": true,
            // Set to true if you want to use the WordPress multisite feature
            "multisite": false,
            // GitHub Codespaces doesn't support subdomain multisite; we have to use subdirectory instead
            "multisiteStyle": "subdirectory"
        },
        "ghcr.io/automattic/vip-codespaces/wp-cli:latest": {
            // Set to true if you want to use nightly builds of WP CLI
            "nightly": false
        },
        "ghcr.io/automattic/vip-codespaces/vip-go-mu-plugins:latest": {
            "enabled": true,
            "retainGit": false
        },
        "ghcr.io/automattic/vip-codespaces/dev-tools:latest": {},
        // Recommended features
        "ghcr.io/automattic/vip-codespaces/memcached:latest": {
            // While it is possible to disable memcached (along with the Object Cache), it is not recommended
            "enabled": true
        },
        "ghcr.io/automattic/vip-codespaces/vip-cli:latest": {
            // Set to false if you don't need the VIP CLI
            "enabled": true
        },
        // Elasticsearch
        "ghcr.io/automattic/vip-codespaces/elasticsearch:latest": {
            // Set to true if you want ES. It may need more powerful machine to run (at least 8 GB RAM)
            "enabled": false,
            // Set to false if you don't want to persist the ES data between rebuilds
            "installDataToWorkspaces": true
        },
        // Tools
        "ghcr.io/automattic/vip-codespaces/mailpit:latest": {
            // Set to false if you don't need Mailpit. Warning: you can have either Mailhog or Mailpit, not both
            "enabled": true
        },
        "ghcr.io/automattic/vip-codespaces/mailhog:latest": {
            // Set to false if you don't need MailHog. Warning: you can have either Mailhog or Mailpit, not both
            "enabled": false
        },
        "ghcr.io/automattic/vip-codespaces/phpmyadmin:latest": {
            // Set to false if you don't need phpMyAdmin
            "enabled": true
        },
        // Debugging
        "ghcr.io/automattic/vip-codespaces/xdebug:latest": {
            // Set to true to enable XDebug (you can enable it later in the container as well)
            "enabled": false,
            // Set XDebug mode; see https://xdebug.org/docs/all_settings#mode
            "mode": "debug"
        },
        // Misc
        "ghcr.io/automattic/vip-codespaces/mc:latest": {
            // Set to true if you want to use Midnight Commander
            "enabled": false
        },
        "ghcr.io/automattic/vip-codespaces/ssh:latest": {
            // Set to true if you want an SSH server in your dev environment
            "enabled": false
        }
    },
    "customizations": {
        "vscode": {
            "extensions": [
                "dlech.chmod",
                "dbaeumer.vscode-eslint",
                "mrorz.language-gettext",
                "GitHub.copilot",
                "bmewburn.vscode-intelephense-client",
                "MehediDracula.php-namespace-resolver",
                "wongjn.php-sniffer",
                "esbenp.prettier-vscode",
                "getpsalm.psalm-vscode-plugin",
                "timonwong.shellcheck",
                "johnbillion.vscode-wordpress-hooks",
                "ms-azuretools.vscode-docker",
                "zhiayang.tabindentspacealign",
                "xdebug.php-debug"
			],
            "settings": {
                "intelephense.environment.documentRoot": "/wp",
                "intelephense.environment.includePaths": ["/wp"],
                "intelephense.environment.phpVersion": "8.0.0",
                "intelephense.stubs": [
                    "apcu", "bcmath", "calendar", "Core", "ctype", "curl", "date", "dom", "exif", "fileinfo", "filter", "fpm", "ftp", "gd", "gmagick", "gmp", "gnupg",
                    "hash", "iconv", "igbinary", "intl", "json", "libxml", "mbstring", "mcrypt", "memcache", "memcached", "meta", "mysqli", "newrelic", "openssl",
                    "pcntl", "pcre", "PDO", "pdo_mysql", "pdo_sqlite", "Phar", "posix", "random", "Reflection", "session", "shmop", "SimpleXML", "soap", "sockets",
                    "sodium", "SPL", "sqlite3", "ssh2", "standard", "superglobals", "sysvsem", "sysvshm", "tokenizer", "xdebug", "xml", "xmlreader", "xmlwriter",
                    "Zend OPcache", "zip", "zlib"
                ]
            }
        }
    }
}
